---
steps:
  - checkout: self
  - task: UseDotNet@2
    displayName: Use .NET 8 SDK
    inputs:
      version: 8.x
      includePreviewVersions: true
  - task: NuGetAuthenticate@1
    displayName: "NuGet Authenticate"
  - script: |
      dotnet build "$(Build.SourcesDirectory)/src/GenUsagePlanner/GenUsagePlanner.csproj" --configuration Release
    displayName: "Build GenUsagePlanner"
  - task: DotNetCoreCLI@2
    displayName: "Run GenUsagePlanner"
    inputs:
      command: 'run'
      projects: '$(Build.SourcesDirectory)/src/GenUsagePlanner'
      arguments: '--configuration $(ReleaseConfiguration)'
    env:
      AzureStorageServiceUrl: $(AzureStorageServiceUrl)
      ApisOfDotNetWebHookSecret: $(ApisOfDotNetWebHookSecret)